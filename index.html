<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Playlist mit Player und Sidebar</title>
<style>
    body {
        font-family: Arial, sans-serif;
        display: flex;
        align-items: stretch;
        min-height: 100vh;
        margin: 0;
    }
    .sidebar {
        width: 250px;
        background-color: #f0f0f0;
        padding: 20px;
    }
    .player-container {
        flex-grow: 1;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    #player {
        width: 80%;
        max-width: 800px;
    }
    .playlist-item {
        cursor: pointer;
        padding: 5px 0;
    }
</style>
</head>
<body>
    <div class="sidebar">
        <h2>Sender</h2>
        <div id="playlist">
            <!-- Hier werden die Sender dynamisch hinzugef체gt -->
        </div>
    </div>
    <div class="player-container">
        <audio id="player" controls>
            Ihr Browser unterst체tzt keine Audioelemente.
        </audio>
    </div>

    <script>
        // M3U-URL zur Liste der Sender
        const m3uURL = 'https://raw.githubusercontent.com/gambler65/kongresi1908/e02c87c13cca9a31a602ca16f92c996c4021df8f/satlok.m3u';

        // Lade die M3U-Datei und erstelle die Playlist
        fetch(m3uURL)
            .then(response => response.text())
            .then(data => {
                // Teile die Zeilen der M3U-Datei auf
                const lines = data.trim().split('\n');

                // Initialisiere eine leere Liste f체r die Sender
                const channels = [];

                // Durchlaufe jede Zeile der M3U-Datei
                for (let i = 0; i < lines.length; i++) {
                    const line = lines[i].trim();

                    // Ignoriere Kommentarzeilen und leere Zeilen
                    if (line.startsWith('#') || line === '') {
                        continue;
                    }

                    // Suche nach #EXTINF und extrahiere Name und URL
                    if (line.startsWith('#EXTINF:')) {
                        // Extrahiere Informationen aus der Zeile
                        const match = line.match(/#EXTINF:-?\d+ (?:tvg-id="([^"]+)")?(?: tvg-name="([^"]+)")?.*,(.*)/);
                        if (match && match.length >= 4) {
                            const tvgId = match[1] || '';
                            const tvgName = match[2] || '';
                            const channelUrl = lines[i + 1].trim();
                            channels.push({ id: tvgId, name: tvgName, url: channelUrl });
                        }
                    }
                }

                // Erstelle Playlist-Eintr채ge in der Sidebar
                const playlistContainer = document.getElementById('playlist');
                channels.forEach(channel => {
                    const playlistItem = document.createElement('div');
                    playlistItem.className = 'playlist-item';
                    playlistItem.textContent = channel.name || 'Unbekannter Sender';
                    playlistItem.addEventListener('click', () => {
                        document.getElementById('player').src = channel.url;
                        document.getElementById('player').play();
                    });
                    playlistContainer.appendChild(playlistItem);
                });
            })
            .catch(error => console.error('Fehler beim Laden der M3U-Datei:', error));
    </script>
</body>
</html>
